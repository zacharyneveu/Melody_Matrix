var datas;
fetch('http://127.0.0.1:5500/data.json').then((response) => {
    return response.json()
})
    .then((data) => {
        datas = data
    });

function setup() {
    createCanvas(windowWidth, windowHeight, WEBGL);
}

function draw() {
    let maxOffset = min(400, width / 2, height / 2)

    function colorPart(x_value, y_value, z_value) {
        let arr = datas[5 - y_value][5 - z_value][x_value]
        return arr.split(',')
    }

    function forRange(fn) {
        const cubeSpacing = 100
        for (let i = -250; i <= 250; i += cubeSpacing) {
            fn(i);
        }
    }

    function coordToIndex(num) {
        return (num / 50 + 5) / 2
    }

    background(155);
    translate(0, 0, -500);
    // rotateX(PI/4)
    // rotateX(millis() / 2000);
    //rotateZ(millis() / 2000);
    rotateY(millis() / 1000);
    // const cosOverTime = cos(millis() / 2000)
    // const changingMaxRadius = createVector(map(cosOverTime, -1, 1, maxOffset, maxOffset * 2), 0, 0);

    forRange(x => forRange(y => forRange(z => {
        let pos = createVector(x, y, z);
        // const shrinkNeeded = changingMaxRadius.mag() / pos.mag();
        // if (shrinkNeeded < 1) {
        //     pos = pos.mult(shrinkNeeded);
        // }
        noStroke()
        push();
        translate(pos.x, pos.y, pos.z);
        let index_x = coordToIndex(x)
        let index_y = coordToIndex(y)
        let index_z = coordToIndex(z)
        let tem_arr = colorPart(index_x, index_y, index_z)
        // if(index_y == 0){
        //     fill(255, 0 ,0)
        // }
        fill(parseInt(tem_arr[0]), parseInt(tem_arr[1]), parseInt(tem_arr[2]));
        sphere(18)
        pop();
    })))

}

// var datas = {
//     "0": {
//         "0": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "1": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "2": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "3": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "4": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "5": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ]
//     },
//     "1": {
//         "0": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "1": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "2": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "3": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "4": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "5": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ]
//     },
//     "2": {
//         "0": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "1": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "2": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "3": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "4": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "5": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ]
//     },
//     "3": {
//         "0": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "1": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "2": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "3": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "4": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "5": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ]
//     },
//     "4": {
//         "0": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "1": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "2": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "3": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "4": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "5": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ]
//     },
//     "5": {
//         "0": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "1": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "2": [
//             "242,73,154",
//             "246,106,169",
//             "251,139,185",
//             "255,172,200",
//             "238,195,167",
//             "222,219,133"
//         ],
//         "3": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "4": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ],
//         "5": [
//             "232,133,154",
//             "223,193,154",
//             "213,253,154",
//             "210,249,136",
//             "208,246,118",
//             "205,242,100"
//         ]
//     }
// }